{{#if user}}
<h1>{{#if profile}}Edit{{else}}Create{{/if}} profile for {{user.username}}</h1>
<form action={{#if profile}}'editProfile'{{else}}'createProfile'{{/if}} method='post'>
    <input type="hidden" name="userID" value={{user._id}}>
    <div>
        <label>Enter typical mile pace: </label>
        <input type='text' name='pace' {{#if profile}}value={{profile.pace}}{{/if}}>
    </div>
    <div>
        <label>Enter typical distance: </label>
        <input type='text' name='distance' {{#if profile}}value={{profile.distance}}{{/if}}>
    </div>
    <div>
        <label>Enter start coordinates (exact location will not be shown to other users: </label><br>
        Latitude:<input type='text' name='lat' id='lat' {{#if profile}}value={{profile.lat}}{{/if}}><br>
        Longitude:<input type='text' name='lon' id='lon' {{#if profile}}value={{profile.lon}}{{/if}}><br>
        <button type='button' id='getLocation'>Get location from device</button>
    </div>
    <div>
        <input type="submit" value="Create"/>
    </div>
</form>
{{/if}}

{{!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>--}}

<!-- Latest compiled and minified JavaScript -->
{{!--<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>--}}
<!-- Latest compiled and minified CSS -->
{{!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">--}}


<script type='text/javascript'>
    function getLatLong(callback) {
      $.getJSON('//freegeoip.net/json/', function(location) {
        $('#lat').val(location.latitude);
        $('#lon').val(location.longitude); 
        //callback(data);
        },
        function(error) {}, {
          timeout: 10000
        }
      )
    };
    
    document.getElementById('getLocation').onclick = function(){
        getLatLong();
    }
</script>